<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–°”©–∑ –°–∞–π—ã—Å ‚Äî Ultimate Translation Battle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;900&family=Noto+Sans:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link src="css.css" rel="stylesheet">
    <!-- PeerJS: Try local first, fallback to CDN -->
    <script src="peerjs.min.js"></script>
    <script>
        if (!window.Peer) {
            document.write('<script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"><\/script>');
        }
    </script>
    <style>

    </style>
</head>

<body class="debug-mode"> <!-- Always debug mode for now -->

    <!-- BACKGROUND -->
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <div id="debug-log"></div>

    <!-- LOBBY SCREEN -->
    <div id="screen-lobby" class="screen active">
        <div class="card">
            <h1>–°”©–∑ –°–∞–π—ã—Å</h1>
            <h2>Translation Battle</h2>

            <div class="input-group">
                <label>Your Name</label>
                <input type="text" id="inp-name" placeholder="Enter your name" maxlength="10">
            </div>

            <button class="btn btn-primary" onclick="Game.createRoom()">
                <span>üöÄ</span> Create Room
            </button>
            <button class="btn btn-secondary" onclick="UI.showJoin()">
                <span>üîó</span> Join Room
            </button>
            <div class="row" style="margin-top:20px; border-top:1px solid var(--border); padding-top:20px;">
                <button class="btn btn-accent" onclick="Game.startSinglePlayer()">
                    <span>ü§ñ</span> Single Player (Offline)
                </button>
            </div>
            <div id="status-lobby" class="status"></div>
        </div>
    </div>

    <!-- JOIN SCREEN -->
    <div id="screen-join" class="screen">
        <div class="card">
            <h1>Join Room</h1>
            <div class="input-group">
                <label>Room Code</label>
                <input type="text" id="inp-code" placeholder="ABCDE"
                    style="text-transform:uppercase; text-align:center; font-size:1.5rem; letter-spacing:4px;">
            </div>
            <div class="row">
                <button class="btn btn-secondary" onclick="UI.showLobby()">Back</button>
                <button class="btn btn-primary" onclick="Game.joinRoom()">Join Game</button>
            </div>
            <div id="status-join" class="status"></div>
        </div>
    </div>

    <!-- HOST WAITING SCREEN -->
    <div id="screen-host" class="screen">
        <div class="card">
            <h1>Room Ready!</h1>
            <h2>Share this code:</h2>
            <div id="host-code" class="room-code">...</div>
            <p style="color:var(--text-muted); font-size:0.9rem;">Waiting for opponent...</p>
            <button class="btn btn-secondary" onclick="location.reload()" style="margin-top:20px;">Cancel</button>
        </div>
    </div>

    <!-- GAME SCREEN -->
    <div id="screen-game" class="screen">
        <div class="hud">
            <div class="score-card" style="text-align:left">
                <div class="score-val" id="score-me" style="color:var(--primary)">0</div>
                <div class="score-label">You</div>
            </div>
            <div class="timer" id="timer">90</div>
            <div class="score-card" style="text-align:right">
                <div class="score-val" id="score-opp" style="color:var(--danger)">0</div>
                <div class="score-label" id="label-opp">Enemy</div>
            </div>
        </div>

        <div class="q-container">
            <div class="q-context" id="q-ctx">Kazakh ‚Üí English</div>
            <div class="q-text" id="q-text">Loading...</div>
            <div class="ans-wrapper">
                <input type="text" class="ans-input" id="inp-ans" placeholder="Type translation..." autocomplete="off">
            </div>
        </div>
    </div>

    <!-- RESULTS SCREEN -->
    <div id="screen-results" class="screen">
        <div class="card">
            <div id="res-msg" class="win-msg">Game Over</div>
            <table class="res-table">
                <tr>
                    <td>Your Score</td>
                    <td id="res-me">0</td>
                </tr>
                <tr>
                    <td>Opponent Score</td>
                    <td id="res-opp">0</td>
                </tr>
            </table>
            <button class="btn btn-primary" onclick="location.reload()">Play Again</button>
        </div>
    </div>

    <!-- FEEDBACK TOASTS -->
    <div id="toast-correct" class="toast" style="color:var(--success)">+1</div>
    <div id="toast-wrong" class="toast" style="color:var(--danger)">‚úó</div>


    <script src="script.js"></script>
</body>

</html>
